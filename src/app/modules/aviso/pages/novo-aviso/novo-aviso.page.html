<app-header titulo="Novo Aviso" botaoRetorno="true"></app-header>

<ion-content class="ion-padding">
  
  <form [formGroup]="form" (ngSubmit)="salvar()">
    <ion-row size="12">
      <ion-col size="12">
        <app-field-input formControlName="titulo" label="Titulo"></app-field-input>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" sizeLg="6" sizeMd="6">
        <app-field-select formControlName="prioridade" label="Prioridade" [options]="opcoesPrioridade">
        </app-field-select>
      </ion-col>
      <ion-col size="12" sizeLg="6" sizeMd="6">
        <app-autocomplete formControlName="canal" idBusca="busca-canal" [listaItens]="nomeCanaisBusca" 
          (onBusca)="selecionarCanal($event)" label="Canal para dúvidas" textoSemResultado="Canal não encontrado"></app-autocomplete>
      </ion-col>
    </ion-row>
    <!-- TURMA -->
    <!-- TABELA TURMA -->
    <ion-row>
      <ion-col size="12">
        <ng-container>
          <ng-container *ngFor="let turma of listaTurmasTabela">
            <ion-item class="c-item"
              lines="none">
              <ion-label>
                <ion-row class="ion-align-items-center">
                  <ion-col class="ion-align-items-center" size="9" sizeLg="11" sizeMd="11">
                    <ion-row>
                      <ion-text class="c-item-titulo ion-text-wrap">{{turma.nome}}</ion-text>
                    </ion-row>
                  </ion-col>
                  <ion-col size="3" sizeLg="1" sizeMd="1" style="text-align: -webkit-right">
                    <ion-fab-button color="danger" size="small" 
                        (click)="deletarTurma(turma.idTurma)">
                        <ion-icon name="trash"></ion-icon>
                    </ion-fab-button>
                  </ion-col>
                </ion-row>
              </ion-label>
            </ion-item>
          </ng-container>
        </ng-container>
      </ion-col>
    </ion-row>
    <!-- BUSCA TURMA -->
    <ion-row>
      <ion-col size="12">
        <app-autocomplete placeholder="Insira a turma" formControlName="turmaBusca" idBusca="busca-turma" [listaItens]="nomeTurmasBusca" (onBusca)="adicionarTurma($event)" 
          textoSemResultado="Turma não encontrada" icone="add"></app-autocomplete>
      </ion-col>
    </ion-row>
    <!-- BUSCA TURMA -->
    <!-- TABELA TURMA -->
    <!-- TURMA -->
    <ion-row size="12">
      <ion-col size="12">
        <app-field-input textArea="true" formControlName="texto" label="Texto"
          rowsTextArea="20"></app-field-input>
      </ion-col>
    </ion-row>
    <ion-row style="flex-direction: row-reverse;">
      <ion-col size="auto">
        <ion-button shape="round" type="submit">Salvar</ion-button>
      </ion-col>
      <ion-col size="auto">
        <ion-button shape="round" fill="outline" color="danger" (click)="cancelar()">Cancelar</ion-button>
      </ion-col>
    </ion-row>
  </form>

</ion-content>
