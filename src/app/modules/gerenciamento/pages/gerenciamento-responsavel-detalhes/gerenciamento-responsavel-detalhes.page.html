<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>gerenciamento-responsavel-detalhes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="form" (ngSubmit)="salvar()">
    <ion-row size="12">
      <ion-col size="12" size-md="6" size-lg="6">
        <app-field-input formControlName="nome" label="Nome"></app-field-input>
      </ion-col>
      <ion-col size="12" size-md="6" size-lg="6">
        <app-field-input formControlName="telefone" label="Telefone"></app-field-input>
      </ion-col>
    </ion-row>
    <hr>
    <ion-row>
      <ion-row>
        <ion-col size="auto">
          <h3 style="margin-left: 5px; font-weight: bold;">Responsável por:</h3>
        </ion-col>
        <!-- <ion-col size="auto">
          <app-button type="button" (click)="adicionarAluno()">Adicionar</app-button>
        </ion-col> -->
        <ion-col>
        </ion-col>
      </ion-row>
      <table mat-table [dataSource]="responsavel.alunos" class="mat-elevation-z8" style="width: 100%;">
        <ng-container matColumnDef="nome">
          <th mat-header-cell *matHeaderCellDef>Nome</th>
          <td mat-cell *matCellDef="let aluno">{{aluno.nome}}</td>
        </ng-container>
        <ng-container matColumnDef="turma">
          <th mat-header-cell *matHeaderCellDef>Turma</th>
          <td mat-cell *matCellDef="let aluno">{{aluno.turma}}</td>
        </ng-container>
        <ng-container matColumnDef="acao">
          <th mat-header-cell *matHeaderCellDef aria-label="row actions"></th>
          <td mat-cell *matCellDef="let aluno">
            <div style="text-align: -webkit-right;">
              <ion-fab-button color="secondary" size="small" style="box-shadow: none;">
                <ion-icon name="information"></ion-icon>
              </ion-fab-button>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="colunasAluno"></tr>
        <tr mat-row *matRowDef="let row; columns: colunasAluno;"></tr>
      </table>
    </ion-row>
    <ion-row>
      <ion-row>
        <h3 style="margin-left: 5px; font-weight: bold;">Informações para Login:</h3>
      </ion-row>
      <ion-row size="12" style="width: 100%;">
        <ion-col size="12" size-md="6" size-lg="6">
          <app-field-input formControlName="cpf" label="CPF"></app-field-input>
        </ion-col>
        <ion-col size="12" size-md="6" size-lg="6">
          <app-field-password formControlName="senha" label="Senha"></app-field-password>
        </ion-col>
      </ion-row>
    </ion-row>
    
    <ng-template id="botoesEditar" #elseTemplate>
      <ion-row style="flex-direction: row-reverse;">
        <ion-col size="auto">
          <ion-button shape="round" type="submit" (click)="salvar()">Salvar</ion-button>
        </ion-col>
        <ion-col size="auto">
          <ion-button shape="round" fill="outline" color="danger" (click)="cancelar()">Cancelar</ion-button>
        </ion-col>
      </ion-row>
    </ng-template>
  </form>
  <ng-container id="botoesDetalhes" *ngIf="modo === 'detalhes'; else elseTemplate">
    <ion-fab slot="fixed" vertical="bottom"  horizontal="start">
      <ion-fab-button id="botao-deletar" color="danger">
        <ion-icon name="trash"></ion-icon>
      </ion-fab-button>
    </ion-fab>
    <ion-fab slot="fixed" vertical="bottom" horizontal="end">
      <ion-fab-button (click)="iniciarEdicao()">
        <ion-icon name="pencil"></ion-icon>
      </ion-fab-button>
    </ion-fab>
    <ion-action-sheet trigger="botao-deletar" header="Deseja deletar {{responsavel.nome}}?" [buttons]="actionDeletar"></ion-action-sheet>
  </ng-container>
  
</ion-content>